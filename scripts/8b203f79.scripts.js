"use strict";angular.module("githubRepoViewerApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/owner/:owner/repo/:name",{templateUrl:"views/repoInfo.html",controller:"RepoInfoCtrl"}).when("/contributor/:contributor",{templateUrl:"views/contributorInfo.html",controller:"ContributorInfoCtr"}).otherwise({redirectTo:"/"})}]),angular.module("githubRepoViewerApp").controller("MainCtrl",["$scope","$rootScope","$location","GitHubService",function(a,b,c,d){a.repoName="",b.repoInfo,a.errors=[],a.pullData=function(){a.repoName&&d.getRepository(a.repoName).then(function(a){b.repoInfo=a,c.url("/owner/"+b.repoInfo.owner.login+"/repo/"+b.repoInfo.name)},function(){a.errors.push("No Repository Information Found")})}}]),angular.module("githubRepoViewerApp").controller("RepoInfoCtrl",["$scope","$rootScope","$routeParams","$location","GitHubService",function(a,b,c,d,e){a.owner=c.owner,a.repo=c.name,a.createdAt,a.lastUpdate,a.errors=[],a.contributors,b.contributorInfo;var f=function(b){e.getGithubData(b).then(function(b){a.contributors=b},function(){a.errors.push("Failed to retreive contributors")})};if(b.repoInfo)a.createdAt=e.formatDate(b.repoInfo.created_at),a.lastUpdate=e.formatDate(b.repoInfo.updated_at),f(b.repoInfo.contributors_url);else{var g=a.owner+"/"+a.repo;e.getRepository(g).then(function(c){b.repoInfo=c,a.createdAt=e.formatDate(b.repoInfo.created_at),a.lastUpdate=e.formatDate(b.repoInfo.updated_at),f(c.contributors_url)},function(){a.errors.push("Failed to retreive list of repos")})}a.showContributorInfo=function(a){a&&e.getUserInfo(a).then(function(c){b.contributorInfo=c,d.url("/contributor/"+a)})}}]),angular.module("githubRepoViewerApp").controller("ContributorInfoCtr",["$scope","$rootScope","$location","$routeParams","GitHubService",function(a,b,c,d,e){a.contributor=d.contributor,a.joined,a.repositories,a.errors=[];var f=function(b){e.getGithubData(b).then(function(b){a.repositories=b},function(){a.errors.push("Failed to retreive repositories")})};b.contributorInfo?(a.joined=e.formatDate(b.contributorInfo.created_at),f(b.contributorInfo.repos_url)):e.getUserInfo(a.contributor).then(function(c){b.contributorInfo=c,a.joined=e.formatDate(b.contributorInfo.created_at),f(b.contributorInfo.repos_url)},function(){a.errors.push("Failed to retreive user information")}),a.showRepoInfo=function(b){c.url("/owner/"+a.contributor+"/repo/"+b)}}]),angular.module("githubRepoViewerApp").service("GitHubService",["$http","$q",function(a,b){return{getRepository:function(c){if(c){var d=b.defer();return a.get("https://api.github.com/repos/"+c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},getGithubData:function(c){if(c){var d=b.defer();return a.get(c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},getUserInfo:function(c){if(c){var d=b.defer();return a.get("https://api.github.com/users/"+c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},formatDate:function(a){var b=new Date(a),c=this.formatMonth(b.getMonth()),d=b.getDate(),e=b.getFullYear(),f=c+" "+d+", "+e;return f},formatMonth:function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=b[a];return c}}}]);