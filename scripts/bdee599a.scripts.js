"use strict";angular.module("githubRepoViewerApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/owner/:owner/repo/:name",{templateUrl:"views/repoInfo.html",controller:"RepoInfoCtrl"}).when("/contributor/:contributor",{templateUrl:"views/contributorInfo.html",controller:"ContributorInfoCtr"}).otherwise({redirectTo:"/"})}]),angular.module("githubRepoViewerApp").controller("MainCtrl",["$scope","$location","GitHubService",function(a,b,c){a.repoName="",a.repoInfo,a.errors=[],a.pullData=function(){a.repoName&&c.getRepository(a.repoName).then(function(c){a.repoInfo=c,b.url("/owner/"+a.repoInfo.owner.login+"/repo/"+a.repoInfo.name)},function(){a.errors.push("No Repository Information Found")})}}]),angular.module("githubRepoViewerApp").controller("RepoInfoCtrl",["$scope","$routeParams","$location","GitHubService",function(a,b,c,d){a.owner=b.owner,a.repo=b.name,a.createdAt,a.lastUpdate,a.errors=[],a.contributors,a.contributorInfo;var e=function(b){d.getGithubData(b).then(function(b){a.contributors=b},function(){a.errors.push("Failed to retreive contributors")})},f=a.owner+"/"+a.repo;d.getRepository(f).then(function(b){a.repoInfo=b,a.createdAt=d.formatDate(a.repoInfo.created_at),a.lastUpdate=d.formatDate(a.repoInfo.updated_at),e(b.contributors_url)},function(){a.errors.push("Failed to retreive list of repos")}),a.showContributorInfo=function(b){b&&d.getUserInfo(b).then(function(d){a.contributorInfo=d,c.url("/contributor/"+b)})}}]),angular.module("githubRepoViewerApp").controller("ContributorInfoCtr",["$scope","$location","$routeParams","GitHubService",function(a,b,c,d){a.contributor=c.contributor,a.joined,a.repositories,a.errors=[];var e=function(b){d.getGithubData(b).then(function(b){a.repositories=b},function(){a.errors.push("Failed to retreive repositories")})};d.getUserInfo(a.contributor).then(function(b){a.contributorInfo=b,a.joined=d.formatDate(a.contributorInfo.created_at),e(a.contributorInfo.repos_url)},function(){a.errors.push("Failed to retreive user information")}),a.showRepoInfo=function(c){b.url("/owner/"+a.contributor+"/repo/"+c)}}]),angular.module("githubRepoViewerApp").service("GitHubService",["$http","$q",function(a,b){return{getRepository:function(c){if(c){var d=b.defer();return a.get("https://api.github.com/repos/"+c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},getGithubData:function(c){if(c){var d=b.defer();return a.get(c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},getUserInfo:function(c){if(c){var d=b.defer();return a.get("https://api.github.com/users/"+c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}},formatDate:function(a){var b=new Date(a),c=this.formatMonth(b.getMonth()),d=b.getDate(),e=b.getFullYear(),f=c+" "+d+", "+e;return f},formatMonth:function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=b[a];return c}}}]);